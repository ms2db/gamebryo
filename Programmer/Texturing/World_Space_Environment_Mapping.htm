<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
 "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>

<title>World-Space Environment Mapping</title>
<!--(Begin Meta)===================================================-->

<meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />
<meta name="Originator" content="Pre-Expedition-RH" />
<meta name="Generator" content="Palimpsest by Emergent Game Technologies - http://emergent.net" />
<meta name="Last-Updated" content="%lastupdated%" />

<!--(End Meta)====================================================-->
    
<!--(Begin Links)===================================================-->
    
<link rel="stylesheet" href="../../shared/Emergent.css" type="text/css" />

<!--(End Links)=====================================================-->

</head>

<!--(Begin Body)===================================================-->
<body lang="EN-US">
<script src="../../shared/NavScript.js" language="JavaScript1.2"
type="text/javascript">
</script><script language="JavaScript1.2" type="text/javascript">
WriteNavLink(2);
</script>

<h1>World-Space Environment Mapping</h1>

<p>By default, most Gamebryo renderers support world-space sphere
mapping for environment maps. In general, environment maps are
designed to represent the light coming from the scene in each
world-space direction. Rather, sphere maps are defined in the
model space of the <span class=
"NDLSystemFont">NiTextureEffect</span> itself, just as are other
<span class="NDLSystemFont">NiTextureEffect</span>s (that use
<span class="NDLSystemFont">WORLD_PARALLEL</span> and
<span class="NDLSystemFont">WORLD_PERSPECTIVE</span>).</p>

<p>With world-space sphere mapping enabled (as is the default in
most renderers), the sphere map image is oriented as follows in
the model space of the <span class=
"NDLSystemFont">NiTextureEffect</span>. The axes described here
map to reflection vectors:</p>

<div class="NDLFigureContainer">
    <img src="images/image022.jpg" width="486" height="383" alt=
    "image022 (11K)"> 
    <!-- <p class="NDLFigureCaption">{Figure caption}</p> -->
</div>

<p>Note that these directions are rotated by the world space
rotation of the <span class=
"NDLSystemFont">NiTextureEffect</span> object. As a result,
rotating the <span class="NDLSystemFont">NiTextureEffect</span>
object will rotate the environment map in world space. Note also
that this is a hemispherical map&mdash;note that the center of
the map is used for both the positive and negative model-space
X-axis. As a result, the sphere-map is really just two identical
hemispheres. However, this is not as great a limitation as it may
initially sound, since the map may be oriented in any way in
world-space by rotating the <span class=
"NDLSystemFont">NiTextureEffect</span>. For example, if the
reflection is to be off of a flat surface (such as a calm lake),
then the effect may be rotated so that the model-space X-axis is
perpendicular to the flat surface. Then, all possible reflection
vectors will lie in the X&gt;0 hemisphere, and the map will have
a unique value for all possible directions.</p>

<p>If the <span class="NDLSystemFont">NiTextureEffect</span> is
not rotated by a transform (either in the effect or a parent),
then the center of the texture map will represent reflections
coming from infinity from the positive and negative world-X
directions. The center-left point on the map represents
reflections coming from infinity from the negative world-Z
direction. The center-right point on the map represents
reflections coming from infinity from the positive world-Z
direction. The center-bottom point on the map represents
reflections coming from infinity from the negative world-Y
direction. The center-top point on the map represents reflections
coming from infinity from the positive world-Y direction. See the
diagram above for a schematic, and the image below for an
example:</p>

<div class="NDLFigureContainer">
    <img src="images/image024.jpg" width="179" height="181" alt=
    "image024 (3K)"> 
    <!-- <p class="NDLFigureCaption">{Figure caption}</p> -->
</div>

<p>This example would result in cloudy sky above (positive Y) the
object, grass below (negative Y) it, and reddish sunset to the
"west" (negative Z) and bright sky to the "east" (positive Z) of
the object. Note that although it was not done to this example
image, images used as environment maps often "spherized" in a
paint program to correct for mapping distortions that occur with
sphere mapping. An example of a "spherized" checkerboard is shown
below. Note that unused areas in the texture are left
undistorted.</p>

<div class="NDLFigureContainer">
    <img src="images/image026.jpg" width="170" height="171" alt=
    "image026 (9K)"> 
    <!-- <p class="NDLFigureCaption">{Figure caption}</p> -->
</div>

<!--kadov_tag{{<placeholder id="footer">}}-->

</body>

</html>
