<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
 "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>

<title>Working with transitions in the Animation Tool</title>
<!--(Begin Meta)===================================================-->

<meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />
<meta name="Originator" content="Pre-Expedition-RH" />
<meta name="Generator" content="Palimpsest by Emergent Game Technologies - http://emergent.net" />
<meta name="Last-Updated" content="%lastupdated%" />

<!--(End Meta)====================================================-->
    
<!--(Begin Links)===================================================-->
    
<link rel="stylesheet" href="../../shared/Emergent.css" type="text/css" />

<!--(End Links)=====================================================-->

</head>

<!--(Begin Body)===================================================-->
<body lang="EN-US">
<script src="../../shared/NavScript.js" language="JavaScript1.2" type="text/javascript"></script> <script language="JavaScript1.2" type="text/javascript">WriteNavLink(2);</script>

<h1>Working with transitions in the Animation Tool</h1>

<p>You can use the Animation Tool to set up transitions from one animation sequence to another.</p>

<p class="NDLHeadingProcedure">To add or modify animation sequence transitions</p>

<ol>

	<li>Launch the Animation Tool and load a .KFM file that you want to work with. For example:

	<p class="indent1"><span class="NDLSystemFont"><em>%EMERGENT_PATH%</em>\Samples\Models\AnimationToolExamples\Tutorials\Tutorial1.kfm</span></p>
 
<p class="indent1">The application should look something like the image below.</p>

    <div class="FigureContainer">
        <img src="./images/2_1_LoadedFile.jpg" width="640" height="499" />
        <!-- <p class="FigureCaption">{Figure caption}</p> -->
    </div>
	</li>
	
	<li>In the Project View, select a sequence. For example, if you are working with the <span class="NDLSystemFont">Tutorial1.kfm</span> sample, select the <span class="NDLGUILabel">walk</span> sequence. Once you select the sequence, the animation plays in the Render View.</li>

	<li>In the Edit View, expand the <span class="NDLGUILabel">Sequence Text Keys</span> rollout and note the text keys in the sequence. If you are working with the <span class="NDLSystemFont">Tutorial1.kfm</span> sample, pay particular attention to the morph: left_foot_down and morph: right_foot_down keys.

    <div class="FigureContainer">
        <img src="./images/2_2_WalkTextKeys.jpg" width="306" height="415"
    />
        <!-- <p class="FigureCaption">{Figure caption}</p> -->
    </div>
	</li>
	
	<li>If you are not working with the <span class="NDLSystemFont">Tutorial1.kfm</span> sample, skip ahead to the next step. Otherwise, select the <span class="NDLGUILabel">run</span> sequence in the Project View. Watch the animation play. Take a look at the Edit View. Make a note of the text keys in this particular sequence. You can see that this sequence also has the morph: left_foot_down and morph: right_foot_down keys, but they occur at different times in the run sequence than they do in the walk sequence.


    <div class="FigureContainer">
        <img src="./images/2_3_RunTextKeys.jpg" width="307" height="412"
    />
        <!-- <p class="FigureCaption">{Figure caption}</p> -->
    </div>
	</li>
	
	<li>Review information in the Transitions View.
	
	<p class="indent1">This view displays all of the transitions in an easy-to-read grid layout. The rows correspond to the starting, or source, sequence in the transition. The columns correspond to the target, or destination, sequence of the transition.</p>
	</li>
	
	<li>In the Transitions View grid, select the transition entry that corresponds to the intersection between the two sequences that you are working with. For example, if you are working with the <span class="NDLSystemFont">Tutorial1.kfm</span> sample, select the transition entry for the <span class="NDLGUILabel">walk</span> and <span class="NDLGUILabel">run</span> sequences. (As you move the mouse within the grid, the current row and column headers are highlighted to make locating the transition easier.)

    <div class="FigureContainer">
        <img src="./images/2_4_TransitionsView.jpg" width="639" height="416"
    />
        <!-- <p class="FigureCaption">{Figure caption}</p> -->
    </div>
	
	<p class="indent1">Once you have selected the transition entry, the Render View changes to display a preview of that transition. The time slider also changes from what was displayed when just a sequence was selected. This new time slider reflects the transition that is occurring. The area in green is the source sequence. The area in red is the destination sequence. If you are working with the <span class="NDLSystemFont">Tutorial1.kfm</span> sample, you see that these two sequences overlap near the center of the time slider. The time in which these two sequences overlap indicates the duration of the transition.</p>

    <div class="FigureContainer">
        <img src="./images/2_5_RenderView.jpg" width="660" height="644"
    />
        <!-- <p class="FigureCaption">{Figure caption}</p> -->
    </div>
	</li>	

	<li>Take a look at the Transitions View again. Note the label in the transition entry. This text corresponds to one of the seven transition types that are supported in the Animation Tool. Whenever a new sequence is loaded into a project, transitions between it and every other sequence are automatically assigned to be either Default Sync or Default NonSync transitions depending on the note key entries between each pair of sequences. If the two sequences share text keys with matching text after the morph: prefix, then they can be synchronized and get a Default Sync transition. If the two sequences cannot be synchronized, they get a Default NonSync transition.

	<p class="indent1">In the <span class="NDLSystemFont">Tutorial1.kfm</span> sample, we previously noted that both walk and run sequences have matching morph keys, morph: left_foot_down and morph: right_foot_down. Each of the two default transition types have a setting for the Default Type and Default Duration. Changing these settings will affect all transitions matching that transition type in the project.</p>

	</li>
	
	<li>Select the Render View again. The time slider has an icon above it that appears like a plus sign (+). This icon indicates when the application triggers the transition. Click this transition marker and slide it to the left or right. Note that this adjusts when the transition begins in animation playback.

    <div class="FigureContainer">
        <img src="./images/2_6_TransitionMarker.jpg" width="658" height="107"
    />
        <!-- <p class="FigureCaption">{Figure caption}</p> -->
    </div>
	</li>
	
	<li>Move your mouse so that it is located over one of the downward arrows on the time slider. Note that these arrows line up on both the top and bottom of the transition time slider. The top row of arrows indicate text keys in the source sequence. The bottom row of arrows indicate text keys in the destination sequence. If you are working with the <span class="NDLSystemFont">Tutorial1.kfm</span> sample, these keys are aligned because the sequence is synchronized.

    <div class="FigureContainer">
        <img src="./images/2_7_MorphTags.jpg" width="656" height="94"
    />
        <!-- <p class="FigureCaption">{Figure caption}</p> -->
    </div>
	</li>	

	<li>Select the Edit View. Note that it displays useful information about the currently selected transition.

    <div class="FigureContainer">
        <img src="./images/2_8_DefaultSyncEditView.jpg" width="305" height="355"
    />
        <!-- <p class="FigureCaption">{Figure caption}</p> -->
    </div>
	</li>
	
	<li>Click the <span class="NDLGUILabel">Change Default Settings</span> button. The dialog box that displays contains the common settings for all Default Sync transitions. The <span class="NDLGUILabel">Default Type</span> field indicates which of the other transition types will be used by the engine to perform the transition. Default Sync only supports Morph transitions for the <span class="NDLGUILabel">Default Type</span> field. Essentially the Default transition types are simply a convenience for a user to set multiple transition values simultaneously. The engine uses one of the non-default transition types under the hood to perform the blending. The <span class="NDLGUILabel">Default Duration</span> is how long the engine should take to transition from the source sequence to the destination sequence. For the time being, click the <span class="NDLGUILabel">Cancel</span> button because you do not want to edit the setting for <em>all</em> Default Sync transitions.

    <div class="FigureContainer">
        <img src="./images/2_9_DefaultSyncSettings.jpg" width="272" height="192"
    />
        <!-- <p class="FigureCaption">{Figure caption}</p> -->
    </div>
	</li>
	
	<li>In the Edit View, click the <span class="NDLGUILabel">Make Unique</span> button. A message appears, asking if you want to change the transition type. Making a Default Sync transition unique means that it is converted to a Morph transition. Note that this dialog has a <span class="NDLGUILabel">Do not show me this message again</span> checkbox. If you do not want to be prompted by this message box each time you click <span class="NDLGUILabel">Make Unique</span>, click this checkbox.<br><br>

  <table class="NDLNoteContainer" width="100%">
      <tr align="left">
          <td class="NDLNoteContainerTD"><p class="NDLHeadingNoteContainer">Note</p>
              <div class="NDLNote">Most message boxes in the Gamebryo Animation Tool have the do not show again checkbox. If you mistakenly click this option, you can always re-enable all message boxes (<span class="NDLGUILabel">Edit > Message Box Management > Reset Message Boxes</span>). Advanced users can enable or disable individual message boxes by choosing <span class="NDLGUILabel">Edit > Message Box Management > Manage Message Boxes</span>.
              </div>
          </td>
      </tr>
  </table>
	

	<p class="indent1">To convert this transition into a unique morph, click <span class="NDLGUILabel">Yes</span>.</p>

    <div class="FigureContainer">
        <img src="./images/2_10_MakeUniqueWarningDlg.jpg" width="600" height="195"
    />
        <!-- <p class="FigureCaption">{Figure caption}</p> -->
    </div>
	
	<p class="indent1">The transition is now listed as a morph in the Edit View. Morphs have only one adjustable parameter, their duration. You can adjust the duration as necessary. For example, if you are working with the <span class="NDLSystemFont">Tutorial1.kfm</span> sample, the default duration of 0.25 is too short, so set the duration to 0.5 seconds. You can change the duration in any of the following ways:</p>
		<ul>
	
			<li>You can manually type in the value into the text field. </li>
	
			<li>You can click the down arrow next to the text field and drag the large slider shown below.</li>
	
			<li>You can drag the smaller slider immediately below the text ield.</li>
		</ul>

    <div class="FigureContainer">
        <img src="./images/2_11_MorphEditViewDuration.jpg" width="307" height="214"
    />
        <!-- <p class="FigureCaption">{Figure caption}</p> -->
    </div>
		
		<p class="indent1">Note that when you adjust the duration, the time slider changes to reflect the new duration. Watch the animation playback. The time spent transitioning between sequences is now much longer. You can see that the animation system is speeding up the walk sequence to match the run sequence via the morph tags.</p>

    <div class="FigureContainer">
        <img src="./images/2_12_MorphTimeSlider.jpg" width="653" height="86"
    />
        <!-- <p class="FigureCaption">{Figure caption}</p> -->
    </div>
	</li>

	<li>Now that you understand what happens when transitions are synchronized, you can experiment further to see what happens when transitions are unsynchronized. In the Edit View, click the Browse (<span class="NDLGUILabel">...</span>) button beside the <span class="NDLGUILabel">Transition Type</span> field. In the Select Transition Type dialog box, select <span class="NDLGUILabel">Cross Fade</span>. (You can also change the type to Cross Fade by right-clicking the cell in the Transitions View or by selecting the transition in the Transitions View and pressing the F key).

    <div class="FigureContainer">
        <img src="./images/2_13_TransitionTypeDlg.jpg" width="360" height="264"
    />
        <!-- <p class="FigureCaption">{Figure caption}</p> -->
    </div>
	</li>
	
	<li>You will be prompted to make sure you want to change the transition type. Click the <span class="NDLGUILabel">Yes</span> button to change the transition to a cross fade.


    <div class="FigureContainer">
        <img src="./images/2_14_ChangeTransitionWarningDlg.jpg" width="600" height="195"
    />
        <!-- <p class="FigureCaption">{Figure caption}</p> -->
    </div>
		
	<p class="indent1">The Edit View now indicates that this transition is a cross fade. Watch the animation playback. If you are working with the <span class="NDLSystemFont">Tutorial1.kfm</span> sample, nothing appears to be wrong with the default transition marker position.</p>

    <div class="FigureContainer">
        <img src="./images/2_15_CrossFadeEditView.jpg" width="308" height="184"
    />
        <!-- <p class="FigureCaption">{Figure caption}</p> -->
    </div>
	</li>
	
	<li>To see where the unsynchronized transition goes wrong in the <span class="NDLSystemFont">Tutorial1.kfm</span> sample, drag the transition marker to around .2 seconds on the time slider.

	<p class="indent1">While you watch the playback, note that there is an odd shuffle step in the transition now. This is what happens to sequences when they aren't synchronized. This doesn't mean that all sequences need morph tags to look correct, however. Many sequences don't need to be synchronized directly during transitions because the motions are completely unrelated. Walk to run has a strong correlation between the source and destination sequence, so it should be synchronized. It is important to preview the transition from several transition marker locations when setting up your own transitions to get a feel for how the sequences will blend during a transition.</p>

    <div class="FigureContainer">
        <img src="./images/2_16_ShuffleStep.jpg" width="655" height="645"
    />
        <!-- <p class="FigureCaption">{Figure caption}</p> -->
    </div>
	</li>
	
	<li>In some situations, there is a subset of animations in your project that can share common settings. When this is true, you can use the Default transitions that were mentioned previously. Change the transition that you have been working with to a Default NonSync transition using the same methods described earlier. If you are working with walk to run sequence in the <span class="NDLSystemFont">Tutorial1.kfm</span> sample, note that the transition changes to 0.25 because this is the value for all Default NonSync transitions.

    <div class="FigureContainer">
        <img src="./images/2_17_DefaultNonSyncEditView.jpg" width="308" height="357"
    />
        <!-- <p class="FigureCaption">{Figure caption}</p> -->
    </div>
	</li>
	
	<li>If you want to, you can change the settings for all Default NonSync transitions by clicking the <span class="NDLGUILabel">Change Default Settings</span> button. Default NonSync transitions allow for two distinct types: Cross Fade and Immediate Blend. For the time being, click the <span class="NDLGUILabel">Cancel</span> button to return to the Edit View.

    <div class="FigureContainer">
        <img src="./images/2_18_DefaultNonSyncSettings.jpg" width="272" height="192"
    />
        <!-- <p class="FigureCaption">{Figure caption}</p> -->
    </div>
	</li>
	
	<li>In the Edit View, select Immediate Blend in the <span class="NDLGUILabel">Transition Type</span> field. Change the duration back to .5 seconds.

	<p class="indent1">If you are working with the <span class="NDLSystemFont">Tutorial1.kfm</span> sample, note that the time slider now has a yellow bar spanning the height of the slider where the two sequences used to overlap. This indicates that the immediate blend is a pose-to-pose transition. This means that when the transition occurs, the source sequence's time pauses as the weight gradually shifts to the destination sequence's starting pose. Watch the animation playback to see this in action. You can see this more clearly if you slow down the playback rate using the slider in the bottom right of the Render View.</p>

    <div class="FigureContainer">
        <img src="./images/2_19_ImmediateBlendRenderView.jpg" width="658" height="643"
    />
        <!-- <p class="FigureCaption">{Figure caption}</p> -->
    </div>
	</li>
	
	<li>Drag the transition marker to the left and right. Note that the source pose is the value at the transition marker. The destination pose is always the start of the destination sequence. You can adjust the starting pose in the destination sequence by editing the <span class="NDLGUILabel">Time in destination to blend to</span> parameter in the Edit View. If you are working with the <span class="NDLSystemFont">Tutorial1.kfm</span> sample, select <span class="NDLGUILabel">morph:left foot down</span> from the drop-down list. Now, watch the animation playback. Note that the destination pose is always the pose at morph: left foot down.

    <div class="FigureContainer">
        <img src="./images/2_20_ImmediateBlendEditView.jpg" width="307" height="257"
    />
        <!-- <p class="FigureCaption">{Figure caption}</p> -->
    </div>
	</li>
	
	<li>In the Edit View, change the <span class="NDLGUILabel">Transition Type</span> to Delayed Blend. Note that the Edit View has a <span class="NDLGUILabel">Blend Pairs</span> list box with "end" to "start" listed as the only values. Delayed blends have a set of specified mappings from poses in the source sequence to poses in the destination sequence.

    <div class="FigureContainer">
        <img src="./images/2_21_DelayedBlendEditView.jpg" width="306" height="434"
    />
        <!-- <p class="FigureCaption">{Figure caption}</p> -->
    </div>
	</li>
	
	<li>In the Render View, drag the transition marker to the left on the time slider. Note that the transition does not begin immediately at the marker. It begins once you pass the end text key in the source sequence. This delay is what distinguishes this transition type from the others.

    <div class="FigureContainer">
        <img src="./images/2_22_DelayedBlendTimeSlider.jpg" width="655" height="86"
    />
        <!-- <p class="FigureCaption">{Figure caption}</p> -->
    </div>
	</li>
	
	<li>In the Edit View, select "morph:right foot down" from the <span class="NDLGUILabel">Time in Source to Start Blend</span> drop-down and "morph:right foot down" from the <span class="NDLGUILabel">Time in Destination to Blend to</span> drop-down and then click the <span class="NDLGUILabel">Add</span> button.

    <div class="FigureContainer">
        <img src="./images/2_23_AddedBlendPairEditView.jpg" width="307" height="435"
    />
        <!-- <p class="FigureCaption">{Figure caption}</p> -->
    </div>
	</li>
	
	<li>In the Render View, drag the transition marker on the time slider again. Note that the first blend pair after the transition marker will be the one used for the transition.

    <div class="FigureContainer">
        <img src="./images/2_24_AddedBlendPairTimeSlider.jpg" width="655" height="86"
    />
        <!-- <p class="FigureCaption">{Figure caption}</p> -->
    </div>
	</li>
	
	<li>In the Edit View, select Chain in the <span class="NDLGUILabel">Transition Type</span> field. Chain transitions have one or more intermediate sequences that are played prior to transitioning into the destination sequence. When you convert a sequence to a Chain transition, you must immediately define this set of intermediate sequences. You use the Edit Chain Dialog to specify the intermediate sequences. The possible sequences are displayed on the left and the current list of sequences in the chain is displayed on the right. You can add or remove sequences from the end of the chain by clicking the left and right arrows between the two groups.

    <div class="FigureContainer">
        <img src="./images/2_25_EditChainDlg.jpg" width="566" height="432"
    />
        <!-- <p class="FigureCaption">{Figure caption}</p> -->
    </div>
	</li>
	
	<li>In the <span class="NDLGUILabel">Possible Sequences</span> list, double-click the sequence that you want to add as an intermediate sequence. Note that this adds that sequence to the <span class="NDLGUILabel">Intermediate Sequences</span> list. If you are working with the <span class="NDLSystemFont">Tutorial1.kfm</span> sample, double-click the jump sequence. Click <span class="NDLGUILabel">OK</span>.</li>

	<li>View the animation playback in the Render View. Note that the intermediate sequence that you added plays between the source and destination sequences. In the <span class="NDLSystemFont">Tutorial1.kfm</span> sample, jump  now plays between walk and run.

	<p class="indent1">Whenever an intermediate sequence begins playback, the tool uses the existing transition from the prior sequence in the chain. For example, if you are working with the <span class="NDLSystemFont">Tutorial1.kfm</span> sample, this means that we are using the transitions "walk to jump" and "jump to run" that already exist for the current chain.</p>

    <div class="FigureContainer">
        <img src="./images/2_26_ChainRenderView.jpg" width="658" height="598"
    />
        <!-- <p class="FigureCaption">{Figure caption}</p> -->
    </div>
	</li>
	
	<li>In the Transitions View, click the transition that you are working with ("walk to jump" if you're working with the sample) and then click the <span class="NDLGUILabel">Make Unique</span> button. Increase the duration to 0.5 seconds.</li>

	<li>In the Transitions View, click any other transitions that you're working with ("jump to run" if you're working with the sample) and then click the <span class="NDLGUILabel">Make Unique</span> button. Increase the duration to 0.5 seconds.</li>

	<li>If you're working with the sample, click "walk to run" in the Transitions View. Note that the duration in the chain is longer for "walk to jump" and "jump to run". This is because we edited these transitions in the previous step.

    <div class="FigureContainer">
        <img src="./images/2_27_ChainNewDurationsTimeSlider.jpg" width="658" height="88"
    />
        <!-- <p class="FigureCaption">{Figure caption}</p> -->
    </div>
	</li>
	
	<li>Select the Edit View again. In the <span class="NDLGUILabel">Chain Sequence</span> listbox, select the intermediate sequence that you added. If you are working with the <span class="NDLSystemFont">Tutorial1.kfm</span> sample, select the jump sequence. Within the <span class="NDLGUILabel">Selected Sequence</span> section of the Edit View, note that <span class="NDLGUILabel">End of Sequence</span> is currently selected. This means that the engine will wait until the sequence (jump) ends before transitioning to the nexts equence (run). Select the <span class="NDLGUILabel">In Seconds</span> radio button and change the value listed there to 0.2 seconds.


    <div class="FigureContainer">
        <img src="./images/2_28_ChainJumpDurationEditView.jpg" width="306" height="440"
    />
        <!-- <p class="FigureCaption">{Figure caption}</p> -->
    </div>

	<p class="indent1">Note that the sequence does not complete and only plays for .2 seconds now before transitioning to the next sequence. If you are working with the <span class="NDLSystemFont">Tutorial1.kfm</span> sample, the "jump" sequence only plays for .2 seconds before it transitions to "run".</p>

    <div class="FigureContainer">
        <img src="./images/2_29_ChainJumpDurationTimeSlider.jpg" width="659" height="89"
    />
        <!-- <p class="FigureCaption">{Figure caption}</p> -->
    </div>
	</li>
	
	<li>Save the current project.</li>
 </ol>
 
<p class="NDLHeadingRelatedTopic">Related topics</p>

<ul>
  <li><a HREF="Introduction_to_Animation_Blending.htm">Introduction to Animation Blending</a></li>
  <li><a HREF="Transition_Types.htm">Transition Types</a></li>
</ul>


<!--kadov_tag{{<placeholder id="footer">}}-->

</body>

</html>
