<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
 "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>

<title>Asset Viewer Collision Lab</title>
<!--(Begin Meta)===================================================-->

<meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />
<meta name="Originator" content="Pre-Expedition-RH" />
<meta name="Generator" content="Palimpsest by Emergent Game Technologies - http://emergent.net" />
<meta name="Last-Updated" content="%lastupdated%" />

<!--(End Meta)====================================================-->
    
<!--(Begin Links)===================================================-->
    
<link rel="stylesheet" href="../../shared/Emergent.css" type="text/css" />

<!--(End Links)=====================================================-->

</head>

<!--(Begin Body)===================================================-->
<body lang="EN-US">
<script src="../../shared/NavScript.js" language="JavaScript1.2"
type="text/javascript">
</script><script language="JavaScript1.2" type="text/javascript">
WriteNavLink(2);
</script>

<h1>Asset Viewer Collision Lab</h1>

<p>The Collision Lab is integrated into the Asset Viewer. You can
use this tool to analyze objects that have been set up to
collide. You can also use this tool to ensure expected behavior
for both dynamic and static collision situations. Use the
Collision Lab to choose files that contain collision data. Files
that contain collision data fall into two categories. The
<em>collidee</em> is a static and unmoving object. The
<em>collider</em> is the moving object. Typically, you test a
collider against a number of collidees.</p>

<table class="NDLNoteContainer" width="100%">
    <tr align="left">
        <td class="NDLNoteContainerTD">
            <p class="NDLHeadingNoteContainer">Note</p>

            <div class="NDLNote">
                The Collision Lab treats an entire scene root as
                a single collidable object (if the NIF has
                multiple roots, only the first will be used).
                Also, only scenes that are loaded via the Lab
                itself will take part in collisions.
            </div>
        </td>
    </tr>
</table>

<div class="NDLFigureContainer">
    <img src="./images/Collision_Labs_window_pane.jpg" alt=
    "Collision Labs window pane" width="150" height="360">

    <p class="NDLFigureCaption">Collision lab window</p>
</div>

<p>The Collision Lab will allow you to test a single collider
against one collidee at a time. To facilitate this interaction,
the Collision Lab's window enables you to set a working path from
which collidee NIF files may be chosen. Choosing the collidee
path is performed by clicking on the "Set Collidee Path" button and
choosing a path where your NIFs (having collision set-up) reside.
Once the path has been chosen, all NIF files in that directory
will populate the list-box entitled "Choose Collidee Scene" (
Samples may be found under <em>%EMERGENT_PATH%</em>\Samples\Models\Collision\NIF\).</p>

<p>Choose a collidee from the populated list and that collidee
will be loaded into the Asset Viewer ready to be tested
against.</p>

<p>The next step is to choose the collider NIF file by clicking
the "Choose Collider" button.</p>

<p>Normally, when scenes are loaded into the Gamebryo Asset
Viewer, they are placed beneath the main "Asset Viewer Root"
node. However, when scenes are loaded into the Asset Viewer using
the Collision Lab, they are placed under the specially tagged
"NDL Collision Lab" node. This approach enables you to remove the
entire active collision dataset as if it were a single file that
had been loaded or added to the scene. Alternatively, you can
simply choose the "Remove All" button from the Collision Lab
window.</p>

<p>The collider object can be moved once the "Collision
Translate" interaction mode icon is toggled. That toggle can be
found next to the camera mode toggles. Once in "Collision
Translate" mode, holding down the left mouse button and moving
the mouse will move the collider in the 4 cardinal directions of
the screen. Collision tests will be performed statically between
the collider and collidee. Positive results are indicated
visually. In the case of ABVs, an ABV representation will be
visually depicted while in the case of triangle and OBB
collisions, a single colliding triangle will be displayed.</p>

<p>The "Collision Options" button brings up a dialog that enables
you to specify the velocity of your <em>collider</em>-object during dynamic
collision testing. (You may also choose whether or not to use
"Auxiliary Callbacks", a debugging mechanism to get callbacks at
every level in a collision hierarchy, especially useful for
determining if your collision filters are set up properly.)</p>

<p>For example, imagine that you have decided to use a capsule
ABV (alternate bounding volume) around your character and are
using it to determine if further collision testing is required.
If a collision with the capsule occurs, you will want to test the
arms, legs, and body of the character, for example. When a
collision occurs at these lower levels, the result is a call to
your callback. With Auxiliary callbacks turned on, you will also
get a callback with the collision of the highest level
capsule.</p>

<div class="NDLFigureContainer">
    <img src="./images/girlnoauxcrop1.jpg" alt=
    "Auxiliary callbacks off" width="350" height="262"> 
    <!-- <p class="NDLFigureCaption">{Figure caption}</p> -->
</div>

<p>In the screen captured above, a simple ABV is being tested
against a hierarchy of ABVs, set up for character collision. We
can see that the sphere is colliding with the girl's hands and
arms. From this screen shot, we can see that the girl's arms are
represented by Capsule-ABVs and that her hands are Box-ABVs. The
sphere itself is represented as a Sphere-ABV. The Collision Lab
enables you to move the <em>collider</em> around using keyboard
or mouse controls. Whenever objects collide, they "light up", as
illustrated above.</p>

<p>For a more complete depiction of what is going on for this
particular scenario, you can turn on Auxiliary Callbacks.</p>

<div class="NDLFigureContainer">
    <img src="./images/girlauxcrop1.jpg" alt=
    "Auxiliary callbacks on" width="350" height="261"> 
    <!-- <p class="NDLFigureCaption">{Figure caption}</p> -->
</div>

<p>After turning on Auxiliary Callbacks, we see above there is a
hierarchy of ABVs involved in collision detection. We can see
that there is a Box-ABV that represents the girl at a high level,
and a Capsule-ABV that represents the girl's torso and the range
of movement of her arms. Only if the sphere collides with these
two ABVs will testing occur with the arms and hands.</p>

<p>We have been looking at static collision scenarios. The
Collision Lab also enables you to analyze dynamic scenarios. To
create a dynamic collision scenario, first separate the collider
and the collidee and then press the space bar. Below, we have
released the sphere toward the girl, using the velocity settings.
As a result, the Collision Lab displays the collision normals
that would have resulted.</p>

<div class="NDLFigureContainer">
    <img src="./images/DynamicGirlCrop1.jpg" alt=
    "Collision normals that would have happened." width="350"
    height="261"> 
    <!-- <p class="NDLFigureCaption">{Figure caption}</p> -->
</div>

<p>Using the Collision Lab will help ensure that the objects used
for collision have been set up correctly and are in working
order, even before hooking them into a game. This technique can
save a lot of time, and serves as a quick and easy way to analyze
and test various collision scenarios.</p>

<p class="NDLHeadingRelatedTopic">Related topics</p>

<ul>
    <li><a href=
    "../../Reference/NiCollision/NiCollisionGroup.htm">NiCollisionGroup</a></li>
</ul>

<!--kadov_tag{{<placeholder id="footer">}}-->

</body>

</html>
