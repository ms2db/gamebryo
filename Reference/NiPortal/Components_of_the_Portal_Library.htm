<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
 "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>

<title>Components of the Portal Library</title>
<!--(Begin Meta)===================================================-->

<meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />
<meta name="Originator" content="Pre-Expedition-RH" />
<meta name="Generator" content="Palimpsest by Emergent Game Technologies - http://emergent.net" />
<meta name="Last-Updated" content="%lastupdated%" />

<!--(End Meta)====================================================-->
    
<!--(Begin Links)===================================================-->
    
<link rel="stylesheet" href="../../shared/Emergent.css" type="text/css" />

<!--(End Links)=====================================================-->

</head>

<!--(Begin Body)===================================================-->
<body lang="EN-US">
<script src="../../shared/NavScript.js" language="JavaScript1.2"
type="text/javascript">
</script><script language="JavaScript1.2" type="text/javascript">
WriteNavLink(2);
</script>

<h1>Components of the Portal Library</h1>

<p>Portalling a dataset involves restructuring the data into some
basic building blocks, then linking these blocks together. The
most important basic building block is an <span class=
"NDLSystemFont">NiRoom</span> object. An <span class=
"NDLSystemFont">NiRoom</span> object represents a convex region
of space that is defined by some number of infinite planes. Each
of these infinite planes is called an <span class=
"NDLSystemFont">NiRoom::Wall</span> object (even though the plane
may represent a floor or ceiling instead of a typical vertical
wall). Most walls are roughly aligned to geometry of a physical
wall that is in the room. Walls are generally represented in 3D
modeling by a marked (or tagged) piece of geometry representing
that wall's plane (often, this will be a piece of flat, hidden
geometry representing a piece of the infinite plane). Note that a
wall is one-sided; If two rooms share a physical wall, each room
must still have its own <span class=
"NDLSystemFont">NiRoom::Wall</span> object, as the wall
represents an oriented plane&mdash;each room's <span class=
"NDLSystemFont">NiRoom::Wall</span> object will have a plane
whose normal points in the opposite direction from that of the
<span class="NDLSystemFont">NiRoom::Wall</span> object in the
other room.</p>

<p>So far, we have enough information to represent a single,
convex room and its walls. However, the aim of the system is to
render very large and complex <em>groups</em> of rooms. This is
where portals are needed. <span class=
"NDLSystemFont">NiPortal</span> objects represent a visibility
connection between two adjoining <span class=
"NDLSystemFont">NiRoom</span> objects. An <span class=
"NDLSystemFont">NiPortal</span> object represents a
from-through-to relationship. The <span class=
"NDLSystemFont">NiPortal</span> object encodes the place from
which one is looking, the object one is looking at, and the shape
and position of the hole through which one sees. In general, the
"From" and "To" objects are adjacent <span class=
"NDLSystemFont">NiRoom</span> objects and the "Through" object is
a polygon that is coincident with the physical wall that is
shared by the two <span class="NDLSystemFont">NiRoom</span>
objects (a door in a wall of the room). A pair of adjacent
<span class="NDLSystemFont">NiRoom</span> objects may have any
number of portals connecting them, including none if the rooms
have no direct ways between them. Multiple portals between a pair
of rooms do not have any significant negative performance impact,
as objects seen through both portals will be drawn once. Note
that <span class="NDLSystemFont">NiPortal</span> objects are
one-way (consider them like a piece of one-way mirrored
glass)&mdash;a portal that goes from <span class=
"NDLSystemFont">NiRoom</span> A to <span class=
"NDLSystemFont">NiRoom</span> B does not imply that <span class=
"NDLSystemFont">NiRoom</span> B can see into <span class=
"NDLSystemFont">NiRoom</span> A. However, in almost all cases,
<span class="NDLSystemFont">NiPortals</span> are created in
pairs&mdash;one for each direction.</p>

<p>The top-level grouping is represented by an <span class=
"NDLSystemFont">NiRoomGroup</span> object, which is a collection
of all of the <span class="NDLSystemFont">NiRoom</span> objects
that are mutually visible. In a sense, it represents an entire
"level" in game terminology. In a modeling package, this
<span class="NDLSystemFont">NiRoomGroup</span> object is a dummy
node in the hierarchy with all of the <span class=
"NDLSystemFont">NiRoom</span> objects attached as linked
children. The following sections give a more detailed top-down
description about the components of the portal library.</p>

<p>Next: <a href="Room_Groups.htm">Room Groups</a></p>

<p>Previous: <a href="What_the_Portals_System_Cannot_Do.htm">What
the Portals System Cannot Do</a></p>

<!--kadov_tag{{<placeholder id="footer">}}-->

</body>

</html>
